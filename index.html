<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DUFIVE | Cinema Archive</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;800&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #ffffff;
            --text: #111111;
            --muted: #666666;
            --accent: #000000;
            --venmo: #008CFF;
            --border: #e5e5e5;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        .container { max-width: 1300px; margin: 0 auto; padding: 0 40px; }

        /* --- NAVIGATION --- */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 60px;
        }

        .brand {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            font-size: 1.2rem;
            text-decoration: none;
            color: var(--text);
            letter-spacing: -0.03em;
            text-transform: uppercase;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--muted);
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: color 0.2s;
        }

        .nav-links a:hover { color: var(--text); }

        /* --- HEADER --- */
        header { margin-bottom: 80px; }
        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 8vw, 5rem);
            font-weight: 700;
            line-height: 1;
            margin-bottom: 15px;
            letter-spacing: -0.02em;
        }
        header p {
            color: var(--muted);
            font-size: 1rem;
            max-width: 600px;
            font-weight: 300;
        }

        /* --- REVIEW GRID --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 Posters across */
            gap: 50px 30px;
            margin-bottom: 100px;
        }

        .entry {
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .poster-frame {
            position: relative;
            aspect-ratio: 2 / 3; /* Perfect vertical film poster ratio */
            background: #f0f0f0;
            overflow: hidden;
            margin-bottom: 20px;
            transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .poster-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .entry:hover .poster-frame {
            transform: translateY(-8px);
        }

        .meta-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 8px;
            color: var(--muted);
        }

        .stars { color: var(--text); font-weight: 700; letter-spacing: 1px; }

        .entry-title {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .entry-excerpt {
            font-size: 0.85rem;
            color: var(--muted);
            font-weight: 300;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* --- VENMO BUTTON --- */
        .venmo-badge {
            position: fixed;
            bottom: 40px;
            right: 40px;
            background: var(--text);
            color: white;
            padding: 18px 25px;
            text-decoration: none;
            font-weight: 800;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            transition: all 0.3s;
        }

        .venmo-badge:hover {
            background: var(--venmo);
            transform: translateX(-5px);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            .grid { grid-template-columns: 1fr; }
            .container { padding: 0 20px; }
            header h1 { font-size: 3rem; }
            .venmo-badge { bottom: 20px; right: 20px; padding: 14px 20px; }
        }

        #loader {
            grid-column: 1 / -1;
            text-align: center;
            padding: 100px 0;
            font-style: italic;
            color: var(--muted);
        }
    </style>
</head>
<body>

    <div class="container">
        <nav>
            <a href="index.html" class="brand">DUFIVE</a>
            <div class="nav-links">
                <a href="Costner.html">The Costner Chronicles</a>
            </div>
        </nav>

        <header>
            <h1>The Archive.</h1>
            <p>Critique and curation of cinema through a sharp lens. Documenting the history of film one frame at a time.</p>
        </header>

        <main class="grid" id="feed-container">
            <div id="loader">Retrieving film history...</div>
        </main>

        <footer style="padding: 80px 0; border-top: 1px solid var(--border); text-align: center;">
            <p style="font-size: 0.7rem; color: var(--muted); letter-spacing: 2px;">&copy; 2026 DUFIVE</p>
        </footer>
    </div>

    <a href="https://venmo.com/Greg-Dufore" target="_blank" class="venmo-badge">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.39 2.1-1.39 1.47 0 2.07.7 2.13 1.7h1.6c-.07-1.62-1.05-2.77-2.65-3.15V5h-2v1.59c-1.51.33-2.72 1.23-2.72 2.8 0 1.88 1.57 2.82 3.87 3.38 2.45.6 2.82 1.45 2.82 2.3 0 1.29-1.03 1.91-2.44 1.91-1.61 0-2.31-.7-2.4-1.81h-1.67c.08 1.82 1.24 2.82 2.85 3.19V20h2v-1.6c1.66-.36 2.82-1.3 2.82-2.93 0-2.29-1.72-3.06-4.42-3.73z"/>
        </svg>
        Support the Critique
    </a>

    <script>
        const RSS_URL = 'https://letterboxd.com/gdufore/rss/';

        async function fetchArchive() {
            try {
                const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(RSS_URL)}`);
                const data = await response.json();
                
                const container = document.getElementById('feed-container');
                container.innerHTML = '';

                data.items.forEach(item => {
                    const stars = (item.description.match(/★/g) || []).length;
                    const half = item.description.includes('½') ? '½' : '';
                    const img = item.description.match(/<img[^>]+src="([^">]+)"/)?.[1] || '';
                    
                    // Clean text and remove stars/HTML
                    let cleanText = item.description.replace(/<[^>]*>/g, '').replace(/★|½/g, '').trim();
                    cleanText = cleanText.substring(0, 140) + '...';

                    const date = new Date(item.pubDate).toLocaleDateString('en-US', {month: 'short', day: 'numeric'});

                    const article = document.createElement('a');
                    article.className = 'entry';
                    article.href = item.link;
                    article.target = '_blank';
                    
                    article.innerHTML = `
                        <div class="poster-frame">
                            <img src="${img}" alt="${item.title}" loading="lazy">
                        </div>
                        <div class="meta-line">
                            <span>${date}</span>
                            <span class="stars">${'★'.repeat(stars)}${half}</span>
                        </div>
                        <h2 class="entry-title">${item.title}</h2>
                        <p class="entry-excerpt">${cleanText}</p>
                    `;
                    container.appendChild(article);
                });
            } catch (err) {
                document.getElementById('feed-container').innerHTML = '<p>The archive is currently offline.</p>';
            }
        }

        fetchArchive();
    </script>
</body>
</html>
